Title: Design Notes
Author: Steven Zeil
Date: @docModDate@


# Processing Steps

## MD to HTML

`docformat` calls `md2html` and then `indexgen0` or `indexgen1`

### md2html

1. Pre-process

    * invokes macroprocessor. 
    
        Parameters include `format` (html), and `courseName` and `delivery` from `course.properties`.
        
  

2. Run `multimarkdown`

3. Post-process

    * Cleans up some odd `<p></div></p>` ibstances generated by `multimarkdown` getting confused about
        paragrpahing of macro-generated HTML inserts. 

    * Transformation `md-html`. All course properties available.
        * Adds scripts for MathJax & highlightJS
        * Generated titleblock & TOC
        * Adds counters to `<h?>` header elements
        * Transforms special tags: details example longlisting includeHTML
    
    * Substitute for any `@property@` strings naming course properties, a local properties file, and
      @docModDate@
      
    * `codeFilter`:  Substitution of `/*...*/` code annotations, \% (why?), and `[_` `_]` for user input.


### md2slidy

Same as `md2html` except for name of `.xsl` file.


### md2pages

Same as `md2html` except for name of `.xsl` file.


    
### md2epub

1. Pre-process: same

2. Run `multimarkdown`

3. Post-process

    * Cleans up some odd `<p></div></p>` ibstances generated by `multimarkdown` getting confused about
        paragrpahing of macro-generated HTML inserts. 

    * Transformation `md-epub`. All course properties available.
        * Generates titleblock & TOC
        * cleans non-epub attributes in img tags
        * Adds counters to `<h?>` header elements
        * Transforms special tags: details example longlisting includeHTML
        * Identifies math spans & divs, writes latex to a `__epub.math.tex` file, inserts `img` tag to
           load expected math image 
    
    * Substitute for any `@property@` strings naming course properties, a local properties file, and
      @docModDate@
      
    * `codeFilter`:  Substitution of `/*...*/` code annotations, \% (why?), and `[_` `_]` for user input.
  
  
4. Run latex on `__epub.math.tex`, then use `dvipng` to generate images. 



# Possible outline format

    # Preamble
    
        ...text ...
        
    # Topic title  [2016-01-10[-2016-01-16]]
    
    ## Description
    ### Overview
    ### Objectives
    ### Relevance
    
    ## Activities
    
    * video: [title](href) text [[Due: ]2016-01-10[T19:30:00][-2016-01-16]] text 
    * asst: [title](href) text [[Due: ]2016-01-10[T19:30:00][-2016-01-16]] text
    
    > If title inside [] is empty, export title from the document
    > href may be a simple URL or doc= or asst=
     
    ## Subtopic title  [2016-01-10[-2016-01-16]]
    
    ### Activities
    
    * lecture: [title](href) text [[Due: ]2016-01-10[T19:30:00][-2016-01-16]] text 
    * lab: [title](href) text [[Due: ]2016-01-10[T19:30:00][-2016-01-16]] text
    
    **Subject**
     
    * meeting: [title](href) text [[Due: ]2016-01-10[T19:30:00][-2016-01-16]] text 
    * quiz: [title](href) text [[Due: ]2016-01-10[T19:30:00][-2016-01-16]] text
    
    # Appendix
    
    > adds docs to epub without putting them into the visible outline
    
    # Postscriot
    
    # Presentation
    
    | Topics | Lectures | Readings| Labs & Assts |
    |--------|----------|---------|------|
    | topics | lecture  | text    | asst |
    |        | slides   |         | Quiz | 
    

    